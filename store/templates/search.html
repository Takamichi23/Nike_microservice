{% extends 'base.html' %}
{% block content %}


<!-- SEARCH HERO -->
<header class="search-hero">
    <div class="container text-white text-center">
        <h1 class="fw-bold">SEARCH PRODUCTS</h1>
        <p>Find what moves you</p>

        <!-- Search Bar -->
        <form action="{% url 'search' %}" method="POST" class="search-form mt-4">
            {% csrf_token %}
            <div class="input-group input-group-lg">
                <input type="text" class="form-control" name="searched"
                       placeholder="Search products, categories, styles">
                <button class="btn btn-dark px-4" type="submit">
                    <i class="bi bi-search"></i>
                </button>
            </div>
        </form>
    </div>
</header>

<!-- SEARCH RESULTS -->
<section class="container-fluid px-4 my-5">

    {% if searched %}
        <h4 class="fw-bold mb-4">
            Results for "{{ request.POST.searched }}"
        </h4>

        <div class="row row-cols-2 row-cols-md-3 row-cols-xl-4 g-4">

            {% for product in searched %}
            <div class="col">

                <div class="product-card">

                    {% if product.is_sale %}
                        <span class="badge bg-dark position-absolute top-0 end-0 m-2">
                            Sale
                        </span>
                    {% endif %}

                    <img src="{{ product.image.url }}" class="img-fluid">

                    <div class="product-actions">
                        <i class="bi bi-heart"></i>
                        <i class="bi bi-bag"></i>
                    </div>

                    <div class="p-2 text-center">
                        <p class="fw-semibold mb-1">{{ product.name }}</p>

                        {% if product.is_sale %}
                            <small>
                                <strike>${{ product.price }}</strike>
                                <strong>${{ product.sale_price }}</strong>
                            </small>
                        {% else %}
                            <small>${{ product.price }}</small>
                        {% endif %}
                    </div>

                    <a href="{% url 'product' product.id %}" class="stretched-link"></a>

                </div>

            </div>
            {% endfor %}

        </div>
    {% endif %}

</section>

{% endblock %}